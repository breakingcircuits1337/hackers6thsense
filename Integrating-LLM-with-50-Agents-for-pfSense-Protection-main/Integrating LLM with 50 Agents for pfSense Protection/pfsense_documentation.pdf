The pfSense Documentation, © 2025 Electric Sheep Fencing LLC & Rubicon Communications LLC
Gateway Alarm
This type of message indicates that a gateway entered an “Alarm” state. For example, due to connectivity loss
between the firewall and the monitor address.
dpinger[11000]: WAN_GW 198.51.100.1: Alarm latency 4807us stddev 1790us loss 21%
Gateway Recovery
This type of log message indicates a gateway is recovering from an Alarm state and is now available for use.
dpinger[11000]: WAN_GW 198.51.100.1: Clear latency 4464us stddev 1028us loss 5%
28.3.9 NTP Logs
The NTP daemon Log contains logs generated by the Network Time Protocol daemon and other time-related actions.
28.3.10 Package Logs
This tab contains messages from packages which support logging to this central location.
Tip: If logs from a specific package are not present, contact the package maintainer to see if the package can be
updated to support this mechanism.
Some packages will log to the main system log or a related tab inside the system logs (Status > System Logs). Others
may keep their own logs in a separate location. Some packages, such as Snort, offer configuration options to control
where and how logs are made. Some logs may need to be viewed outside the GUI or via Diagnostics > Command.
28.3.11 PPP Logs
The PPP logs tab displays any events from the PPP system for WAN type connections, not locally-hosted servers. This
would be for WANs that connect using PPPoE, L2TP, Cellular networks, and so on.
28.3.12 Resolver Logs
The Resolver logs are located at Status > System Logs on the System/DNS Resolver tab.
This log contains entries from DNS-related processes. These include the DNS Resolver (Unbound), DNS Forwarder
(dnsmasq) , the filterdns process that monitors for updates in hostnames for Aliases/IPsec/etc., and the BIND
package.
28.3.13 Routing Logs
The Routing logs are located at Status > System Logs on the System/Routing tab.
This log contains entries from routing-related processes for both IPv4 and IPv6, including:
• radvd (IPv6 Router Advertisements)
• zebra (FRR)
• ospfd (FRR)
• bgpd (FRR)
28.3. Logs 1153


--- PAGE 1156 ---

The pfSense Documentation, © 2025 Electric Sheep Fencing LLC & Rubicon Communications LLC
• bfdd (FRR)
• pimd (PIMD)
• igmpproxy (IGMP Proxy)
• miniupnpd (UPnP IGD & PCP)
28.3.14 IPsec Logs
The IPsec log shows output from strongSwan components such as the IPsec daemon charon. This log contains output
for successful connections, normal ongoing activity such as DPD checks, and errors.
Troubleshooting IPsec VPNs contains example entries and guidance for interpreting the meaning of log messages.
28.3.15 OpenVPN Logs
Logs for OpenVPN are located in the GUI under Status > System Logs on the OpenVPN tab.
These logs include output from the OpenVPN daemon(s) in use, both clients and servers. Log messages include entries
for successful connections as well as failures and errors.
If there are no log entries for a server after the process starts, traffic likely is not reaching the OpenVPN daemon. Check
the WAN-side firewall rules and the address/port used by the client.
See also:
Troubleshooting OpenVPN.
28.3.16 Captive Portal Authentication Logs
The Captive Portal Authentication Logs are available through the GUI at Status > System Logs, on the Portal Auth
tab. The logs list login information from the Captive Portal system.
28.3.17 Wireless Logs
The Wireless logs can be found in the GUI under Status > System Logs on the System/Wireless tab.
These logs contain entries from the hostapd daemon which handles wireless access point connections. This process
can be overly verbose when handling client traffic, logging rekeys and other information that can otherwise clutter the
main system log.
28.3.18 L2TP Logs
A record of login and logout events is kept on Status > System Logs, on the VPN tab, under L2TP Logins.
Eachloginandlogoutisrecordedwithatimestampandusername,andeachloginwillalsoshowtheIPaddressassigned
to the L2TP client. The full log can be found on the L2TP Raw tab.
28.3. Logs 1154


--- PAGE 1157 ---

The pfSense Documentation, © 2025 Electric Sheep Fencing LLC & Rubicon Communications LLC
28.3.19 DHCP Logs
TheDHCPlogviewat Status>SystemLogsontheDHCPTab,displaysmessagesandeventsfromtheDHCPDaemon
and the DHCP client for WANs.
Each DHCP request and reply from DHCP clients is shown here, along with events and errors. IP addresses, MAC
addresses, and client-supplied hostnames are all visible in the logs.
See also:
• Troubleshooting “login on console as root” Log Messages
• Troubleshooting “promiscuous mode enabled” Log Messages
• Troubleshooting ARP Move Log Messages
28.3. Logs 1155


--- PAGE 1158 ---

CHAPTER
TWENTYNINE
DIAGNOSTICS
These documents cover functions found under the Diagnostics menu in pfSense® software.
29.1 DNS Lookup
Diagnostics > DNS Lookup performs simple forward and reverse DNS queries. These queries obtain information
about an IP address or hostname and also test the DNS servers configured on the firewall (DNS Server Settings).
To perform a DNS Lookup:
• Navigate to Diagnostics > DNS Lookup
• Enter a Hostname or IP address to query
• Click Lookup
The page displays the results of the DNS query along with supporting information and options.
29.1.1 DNS servers included in testing
The page will query a specific set of DNS servers. This set depends upon the DNS Server Settings under System >
General.
The page will test against 127.0.0.1 if the DNS Resolver or DNS Forwarder are active and the DNS Resolution
Behavior setting is not set to ignore local DNS.
The page will test each of the DNS Servers from the list at System > General.
The page will also test DNS servers from dynamic WANs if DNS Server Override is set and the firewall has obtained
servers from dynamic sources.
Note: The DNS Resolver mode does not impact the behavior of this test. Even in resolver mode the individual DNS
servers are tested as described above.
1156


--- PAGE 1159 ---

The pfSense Documentation, © 2025 Electric Sheep Fencing LLC & Rubicon Communications LLC
29.1.2 Results
The Results panel contains addresses returned by the DNS query along with the record type.
Underneath the results is a table containing the resolution Timings per server. This shows how fast each of the config-
ured DNS servers responded to the specified query, or if they never responded.
The More Information panel contains links to ping and traceroute functions on the firewall for this host.
29.1.3 Aliases
The GUI can also create a firewall alias from the results of the DNS Lookup query.
Click Add alias to create an alias containing the results of the query.
The name of the alias is the text entered for the DNS query but with . characters replaced by _. For example, a DNS
lookup for example.com results in an alias named example_com.
If an alias already exists with that name, the button is labeled Update Alias instead. That version of the button will
replace the contents of the existing alias with the current results of the DNS lookup.
29.2 Editing Files on the Firewall
Diagnostics > Edit File contains a file editor that allows editing and creating files on the filesystem of a device running
pfSense® software.
Warning: Be careful when choosing a file to edit! It is very easy to render the firewall unusable by editing the
wrong file or introducing errors into the source code.
Do not use this except under guidance of support or when there is sufficient knowledge to use it without causing
unintended side effects.
29.2.1 Edit an Existing file
• Enter the full path of the filename to edit in Save / Load from path or click Browse and locate the file
• Click Load
• Edit the text
• Click Save to store the new content in the file
29.2.2 Create a new File
• Enter the new path and filename in Save / Load from path
• Enter the new contents of the file
• Click Save to create the new file with the given content
29.2. Editing Files on the Firewall 1157


--- PAGE 1160 ---

The pfSense Documentation, © 2025 Electric Sheep Fencing LLC & Rubicon Communications LLC
29.3 Command Prompt
The command prompt, available at Diagnostics > Command Prompt, executes shell commands, PHP code, and can
download or upload whole files.
Warning: Exercisecautionusinganyoftheseutilities. ExecutingcommandsandPHPcodeimproperlycanrender
the firewall unusable. Use of this tool is not recommended except under the guidance of a support representative
or if there is sufficient knowledge on the part of the user.
29.3.1 Execute Shell Commands
To execute a shell command:
• Navigate to Diagnostics > Command Prompt
• Enter the command into the Command box under Execute Shell command
• Click Execute
Commands are executed as if they were run from a console command line, and the page prints the results when the
command terminates.
Warning: Commands must run and then stop or return.
Commands that run indefinitely, such as ping without a count or tcpdump without a limit set will never stop or
return output, and will be left running indefinitely in the background until they are manually killed.
Interactive commands, such as vi will fail similarly, or may exit due to other issues with the terminal being non-
interactive.
Previously used commands from this session can be recalled with the and buttons. The browser will
forget the previous command list once it leaves the page.
29.3.2 Download
To download a file from the firewall filesystem:
• Navigate to Diagnostics > Command Prompt
• Enter the full path name in File to download
• Click Download
29.3. Command Prompt 1158


--- PAGE 1161 ---

The pfSense Documentation, © 2025 Electric Sheep Fencing LLC & Rubicon Communications LLC
29.3.3 Upload
To upload a file:
• Navigate to Diagnostics > Command Prompt
• Click Browse
• Locate and select the file on the local client computer
• Click Upload
Note: Uploaded files are placed in /tmp/ and can then be moved to alternate locations by other functions (such as the
Execute Shell Command feature).
29.3.4 PHP Execute
This page can also execute PHP code.
• Navigate to Diagnostics > Command Prompt
• Type or paste PHP code into the Execute PHP Commands text area
• Click Execute
The GUI displays the output from the PHP code above the text area, or an error if the it could not run the code.
29.4 Ping Host
The firewall can send ICMP echo reqests, also known as “pings”, to hosts over the network. These diagnostic packets
test if the target host responds and measures latency between the firewall and target host. A basic ping test can be
performed at the console, and a more detailed test is available in the GUI at Diagnostics > Ping.
29.4.1 Ping Options
When performing a ping test from the GUI, the following options are available:
Hostname
A hostname or IP address to which the firewall will send ping requests.
IP Protocol
The address type to ping when a hostname is entered that has both A (IPv4) and AAAA (IPv6)
records.
Source Address
The IP address on the firewall from which the ping request will be sent. This is especially important
when testing LAN-to-LAN VPN connectivity. The default choice allows the operating system to
automatically select the closest address to the target, based on the routing table.
Maximum Number of Pings
The number of ping requests the firewall will send during this test. A higher count will take longer
to complete and display results, especially if the target is down. Default is 3.
29.4. Ping Host 1159


--- PAGE 1162 ---

The pfSense Documentation, © 2025 Electric Sheep Fencing LLC & Rubicon Communications LLC
Seconds Between Pings
The number of seconds to wait between sending ping requests. Default is 1 second.
29.4.2 Ping from the GUI
To perform a ping test from the GUI:
• Navigate to Diagnostics > Ping
• Fill in the Ping Options
Note: At a minimum the Hostname is required.
• Click Ping to start the test
• Wait for the GUI to display the test results
The GUI will display the results of the test automatically once complete. Do not navigate away from the page while
the test is running.
29.4.3 Ping from the Console
A simple ping test may also be performed at the console menu, but without the additional options mentioned earlier.
See Ping host for more information.
• Access the console menu locally or via SSH with an admin-level account (admin, root, or another privileged
account using sudo).
• Enter the menu option which corresponds with Ping Host (e.g. 7)
• Press Enter
• Enter the IP address or hostname to ping
• Press Enter to start the test
• Wait for the test to complete.
The console outputs the test results in real time, and pauses afterward.
• Press Enter to return to the menu
29.5 Halting and Powering Off the Firewall
The firewall can be shut down safely by the Halt function available at Diagnostics > Halt System or from the console
menu.
Warning: Thebestpracticeistonever cutpowerfromarunningsystem. Haltingbeforeremovingpowerisalways
the safest procedure.
Aafter the operating system halts, the device power will also be turned off if that feature is supported by the hardware.
29.5. Halting and Powering Off the Firewall 1160


--- PAGE 1163 ---

The pfSense Documentation, © 2025 Electric Sheep Fencing LLC & Rubicon Communications LLC
29.5.1 Halt from the GUI
To halt the operating system from the GUI:
• Navigate to Diagnostics > Halt System
• Click Halt
• Click OK to confirm the action and start the halt process
29.5.2 Halt from the Console
• Access the console menu locally or via SSH with an admin-level account (admin, root, or another privileged
account using sudo).
• Enter the menu option which corresponds with Halt system (e.g. 6)
• Press Enter
• Enter the y to confirm the action
• Press Enter to start the halt process
29.6 Rebooting the Firewall
pfSense® software can be rebooted safely and returned to an operational state using the page at Diagnostics > Reboot
System or the console.
29.6.1 Reboot Methods
The following reboot methods are possible, but available options may be limited depending on the platform and instal-
lation options.
Reboot normally
Performs a normal reboot in the traditional way. This method is always available.
Reroot
Performs a “reroot” style reboot, which is faster than a traditional reboot but does not restart the
entire operating system. All running processes are killed, all filesystems are remounted, and then
the system startup sequence is run again. This type of restart is much faster as it does not reset the
hardware, reload the kernel, or need to go through the hardware detection process.
Reboot into Single User Mode
Restarts the firewall into single user mode for diagnostic purposes. The firewall cannot automatically
recover from this state, console access is required to use single user mode and reboot the firewall.
This option is not compatible with ARM-based systems.
Warning: UsingthisoptionwithZFSwillnotautomaticallyreturntoanormalbootandrequires
manual intervention at the console. See Re-mount ZFS Volumes as Read/Write.
29.6. Rebooting the Firewall 1161


--- PAGE 1164 ---

The pfSense Documentation, © 2025 Electric Sheep Fencing LLC & Rubicon Communications LLC
Warning: In single user mode the root filesystem defaults to read-only and other filesystems
are not mounted. The firewall also does not have an active network connection. This option must
only be used under the guidance of a support representative or a FreeBSD user with advanced
knowledge.
Reboot and run a filesystem check
Reboots the firewall and forces a filesystem check using fsck, run five times. This operation can
often correct issues with the filesystem on the firewall.
This option is not compatible with ARM-based systems or ZFS.
29.6.2 Reboot from the GUI
To reboot from the GUI:
• Navigate to Diagnostics > Reboot System
• Select the Reboot Method
• Click Submit to reboot the system immediately
29.6.3 Reboot from the Console
To reboot from the console:
• Access the console menu locally or via SSH with an admin-level account (admin, root, or another privileged
account using sudo).
• Enter the menu option which corresponds with Reboot system (e.g. 5)
• Press Enter
• Enter the letter which corresponds with the desired Reboot Method
• Press Enter
Note: The single user mode and filesystem check options require an uppercase letter to be entered to confirm the
action. This is necessary to avoid activating the options accidentally. The reboot and reroot options may be entered in
up
(Content truncated due to size limit. Use page ranges or line ranges to read remaining content)